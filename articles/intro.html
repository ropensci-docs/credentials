<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="credentials">
<title>Managing SSH and Git Credentials in R • credentials</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Managing SSH and Git Credentials in R">
<meta property="og:description" content="credentials">
<meta property="og:image" content="https://docs.ropensci.org/credentials/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">credentials</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Managing SSH and Git Credentials in R</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/credentials/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Managing SSH and Git Credentials in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/credentials/blob/HEAD/vignettes/intro.Rmd" class="external-link"><code>vignettes/intro.Rmd</code></a></small>
      <div class="d-none name"><code>intro.Rmd</code></div>
    </div>

    
    
<p>The <code>credentials</code> package contains tools for configuring and retrieving SSH and HTTPS credentials for use with <code>git</code> or other services. It helps users to setup their git installation, and also provides a back-end for packages to authenticate with existing user credentials.</p>
<div class="section level2">
<h2 id="two-types-of-remotes">Two types of remotes<a class="anchor" aria-label="anchor" href="#two-types-of-remotes"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/credentials/">credentials</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Found git version 2.41.0</span></span>
<span><span class="co">## Supported HTTPS credential helpers: cache, store</span></span>
<span><span class="co">## Found OpenSSH_9.0p1, LibreSSL 3.3.6</span></span>
<span><span class="co">## Default SSH key: /Users/jeroen/.ssh/id_ed25519</span></span></code></pre>
<p>Git supports two types of remotes: SSH and HTTPS. These two use completely distinct authentication systems.</p>
<table class="table">
<thead><tr class="header">
<th></th>
<th>SSH REMOTES</th>
<th>HTTPS REMOTES</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>url</strong></td>
<td><code>git@server.com</code></td>
<td><code>https://server.com</code></td>
</tr>
<tr class="even">
<td><strong>authentication</strong></td>
<td>Personal SSH key</td>
<td>Password or PAT</td>
</tr>
<tr class="odd">
<td><strong>stored in</strong></td>
<td>file <code>id_rsa</code> or <code>ssh-agent</code>
</td>
<td>
<code>git credential</code> store</td>
</tr>
</tbody>
</table>
<p>For HTTPS remotes, git authenticates with a username + password. With GitHub, instead of a password, you can also use a <a href="https://github.com/settings/tokens" class="external-link">Personal Access Token</a> (PAT). PATs are preferred because they provide more granular control of permissions (via the PAT’s scopes), you can have many of them for different purposes, you can give them informative names, and they can be selectively revoked. Note that, if you use 2FA with GitHub, you must authenticate with a PAT if you use the HTTPS protocol.</p>
<p>For SSH remotes, git shells out to <code>ssh</code> on your system, and lets <code>ssh</code> take care of authentication. This means you have to setup an ssh key (usually <code>~/.ssh/id_rsa</code>) which you then <a href="https://github.com/settings/ssh/new" class="external-link">add to your git profile</a>.</p>
<div class="section level3">
<h3 id="special-note-for-windows">Special note for Windows<a class="anchor" aria-label="anchor" href="#special-note-for-windows"></a>
</h3>
<p>Windows does not include a native <code>git</code> installation by default. We recommended to use the latest version of <a href="https://git-scm.com/download/win" class="external-link">Git for Windows</a>. This bundle also includes <code>ssh</code> and <a href="https://github.com/Microsoft/Git-Credential-Manager-for-Windows" class="external-link">git credential manager for windows</a> which is all you need.</p>
<p>Important: ssh keys are stored in your home directory for example: <code>C:\Users\Jeroen\.ssh\id_rsa</code>, and <strong>not in the Documents folder</strong> (which is what R treats as the home sometimes). The <code><a href="../reference/ssh_credentials.html">ssh_home()</a></code> function shows the correct <code>.ssh</code> directory on all platforms.</p>
</div>
</div>
<div class="section level2">
<h2 id="part-1-storing-https-credentials">Part 1: Storing HTTPS credentials<a class="anchor" aria-label="anchor" href="#part-1-storing-https-credentials"></a>
</h2>
<p>HTTPS remotes do not always require authentication. You can clone from a public repository without providing any credentials. But for pushing, or private repositories, <code>git</code> will prompt for a username/password.</p>
<pre><code>git clone https://github.com/jeroen/jsonlite</code></pre>
<p>To save you from entering your password over and over, git includes a <a href="https://git-scm.com/docs/gitcredentials" class="external-link">credential helper</a>. It has two modes:</p>
<ul>
<li>
<code>cache</code>: Cache credentials in memory for a short period of time.</li>
<li>
<code>store</code>: Store credentials permanently in your operating system password manager.</li>
</ul>
<p>To see which helper is configured for a given repo, run:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/credential_helper.html">credential_helper_get</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "osxkeychain"</span></span></code></pre>
<p>Most <code>git</code> installations default to <code>store</code> if supported because it is more convenient and secure. However the look and policy of the git credential store for entering and retrieving passwords can vary by system, because it uses the OS native password manager.</p>
<div class="section level3">
<h3 id="accessing-the-https-credential-store-from-r">Accessing the HTTPS Credential Store from R<a class="anchor" aria-label="anchor" href="#accessing-the-https-credential-store-from-r"></a>
</h3>
<p>The <code>credentials</code> R package provides a wrapper around the <code>git credential</code> command line API for reading and saving credentials. The <code><a href="../reference/http_credentials.html">git_credential_ask()</a></code> function looks up suitable credentials for a given URL from the store. If no credentials are available, it will attempt to prompt the user for credentials and return those instead.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/credentials/">credentials</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/http_credentials.html">git_credential_ask</a></span><span class="op">(</span><span class="st">'https://example.com'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $protocol</span></span>
<span><span class="co">## [1] "https"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $host</span></span>
<span><span class="co">## [1] "example.com"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $username</span></span>
<span><span class="co">## [1] "jeroen"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $password</span></span>
<span><span class="co">## [1] "supersecret"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attr(,"class")</span></span>
<span><span class="co">## [1] "git_credential"</span></span></code></pre>
<p>The function <code><a href="../reference/http_credentials.html">git_credential_update()</a></code> looks similar but it behaves slightly different: it first removes existing credentials from the store (if any), then prompts the user for a new username/password, and saves these to the store.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This should always prompt for new credentials</span></span>
<span><span class="fu"><a href="../reference/http_credentials.html">git_credential_update</a></span><span class="op">(</span><span class="st">'https://example.com'</span><span class="op">)</span></span></code></pre></div>
<p>In a terminal window this will result in an interactive password prompt. In Windows the user might see something like this (depending on the version of Windows and git configuration):</p>
<p><img style="width:690px; padding:0;" src="wincred.png"></p>
</div>
<div class="section level3">
<h3 id="setting-your-github_pat">Setting your GITHUB_PAT<a class="anchor" aria-label="anchor" href="#setting-your-github_pat"></a>
</h3>
<p>Automatically populate your <code>GITHUB_PAT</code> environment variable from the native git credential store. The credential manager will safely prompt the user for credentials when needed.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">credentials</span><span class="fu">::</span><span class="fu"><a href="../reference/set_github_pat.html">set_github_pat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## Using GITHUB_PAT from Jeroen Ooms (credential helper: osxkeychain)</span></span></code></pre></div>
<p>Use this function in your <code>.Rprofile</code> if you want to automatically set <code>GITHUB_PAT</code> for each R session, without hardcoding your secrets in plain text, such as in your <code>.Renviron</code> file.</p>
</div>
<div class="section level3">
<h3 id="non-interactive-use">Non-interactive use<a class="anchor" aria-label="anchor" href="#non-interactive-use"></a>
</h3>
<p>Retrieving credentials is by definition interactive, because the user may be required to enter a password or unlock the system keychain. However, saving or deleting credentials can sometimes be done non-interactively, but this depends on which credential helper is used.</p>
<p>The manual page for <code>credential_approve</code> and <code>credential_reject</code> has more details about how to call the basic git credential api.</p>
</div>
</div>
<div class="section level2">
<h2 id="part-2-managing-ssh-keys">Part 2: Managing SSH Keys<a class="anchor" aria-label="anchor" href="#part-2-managing-ssh-keys"></a>
</h2>
<p>For SSH remotes, git does not handle authentication itself. Git simply shells out to <code>ssh</code> on your system and uses your standard user ssh configuration. Hence authenticating with SSH git remotes comes down to setting up your ssh keys and copying these to your profile.</p>
<p>The <code>credentials</code> package provides a few utility functions to make this easier. The <code><a href="../reference/ssh_credentials.html">ssh_key_info()</a></code> function calls out to look up which key <code>ssh</code> uses to connect to a given server. This is usually <code>~/.ssh/id_rsa</code> unless you have a fancy custom ssh configuration.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ssh_credentials.html">ssh_key_info</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $key</span></span>
<span><span class="co">## [1] "/Users/jeroen/.ssh/id_ed25519"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pubkey</span></span>
<span><span class="co">## [1] "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILGN+5tybmwKhcxvnwPSKlrp39Ni1gMD0UhV4gCxHg/x ..."</span></span></code></pre>
<p>The output shows both the path to your (private) key as well as the ssh pubkey string. The latter is what you have to enter in your <a href="https://github.com/settings/ssh/new" class="external-link">GitHub profile</a> to associate this key with your user account. You will then be automatically authenticated when using GitHub SSH remotes.</p>
<div class="section level3">
<h3 id="generating-a-key">Generating a key<a class="anchor" aria-label="anchor" href="#generating-a-key"></a>
</h3>
<p>To use SSH you need a personal key, which is usually stored in <code>~/.ssh/id_rsa</code>. If you do not have a key yet, the <code><a href="../reference/ssh_credentials.html">ssh_key_info()</a></code> function will automatically ask if you want to generate one.</p>
<p><img style="width:690px; padding:0;" src="keygen.png"></p>
<p>You can also generate a key manually elsewhere using the <code><a href="../reference/ssh_credentials.html">ssh_keygen()</a></code> function.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
